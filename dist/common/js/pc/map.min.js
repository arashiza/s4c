this.seiyuJs=this.seiyuJs||{},function(a){function b(){var a=document.createElement("script");a.type="text/javascript",a.src="http://maps.google.com/maps/api/js?sensor=false&callback=seiyuJs.map.initialize",document.body.appendChild(a)}seiyuJs.map={isLoaded:!1},seiyuJs.map.initialize=function(){seiyuJs.map.isLoaded=!0;var b=a("#store-header .add-store-map");b[0]&&seiyuJs.map.setMap(b);var c=a("#content-area .area_googlemap .googlemap_block");c[0]&&seiyuJs.map.setAreaMap(c,area_store_data)},seiyuJs.map.setAreaMap=function(b,c){var d=b,e=c,f=a('<div style="width:100%;height:298px">');d.append(f);var g=new google.maps.Map(f.get(0),{scrollwheel:!0,mapTypeId:google.maps.MapTypeId.ROADMAP}),h=[],i=[];a.each(e,function(a){var b=e[a].latlng.split(","),c=b[0],d=b[1],f=e[a].logotype,j=e[a].name;new seiyuJs.map.SetAreaMapMarker(j,c,d,f,g),h.push(c),i.push(d)});var j=new google.maps.LatLng(Math.min.apply(null,h),Math.min.apply(null,i)),k=new google.maps.LatLng(Math.max.apply(null,h),Math.max.apply(null,i)),l=(new google.maps.LatLngBounds(j,k),new google.maps.LatLngBounds);l.extend(j),l.extend(k),google.maps.event.addListenerOnce(g,"idle",function(){if(g.setZoom(g.getZoom()+zoom_adjust),center_position){var a=center_position.split(","),b=new google.maps.LatLng(a[0],a[1]);g.setCenter(b)}}),g.fitBounds(l),a("#content-area .area_googlemap .store_num span").text(e.length)},seiyuJs.map.SetAreaMapMarker=function(b,c,d,e,f){var g=new google.maps.MarkerImage("/common/img/c/m_"+e+".png",new google.maps.Size(40,40),new google.maps.Point(0,0),new google.maps.Point(20,20)),h=new google.maps.Marker({position:new google.maps.LatLng(c,d),map:f,icon:g}),i=a('<div style="padding-top:5px; width:120px; height:auto; text-align: center;">'),j='<p style="padding: 0 15px 0 0; display: inline-block; *display: inline; *zoom: 1; text-align: left; line-height: 1.3; font-size: 13px; color: #666; background: url(/common/img/c/m_link_arrow.png) right center no-repeat;">'+b+"</p>";i.append(j);var k=new google.maps.InfoWindow({content:i[0]});google.maps.event.addListener(h,"mouseover",function(a){k.open(f,h)}),google.maps.event.addListener(h,"mouseout",function(a){k.close()}),google.maps.event.addListener(h,"click",function(a){location.href="/shop/"+b})},seiyuJs.map.setMap=function(b){var c=a(b);c.attr("data-isload","1");var d='<div style="margin:5px;">'+c.attr("data-title")+"</div>",e=c.attr("data-LatLng").split(",")[0],f=c.attr("data-LatLng").split(",")[1],g=new google.maps.Map(c.find("div").get(0),{zoom:16,center:new google.maps.LatLng(e,f),scrollwheel:!0,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1}),h=new google.maps.MarkerImage("/common/img/c/m_"+c.attr("data-logotype")+".png",new google.maps.Size(40,40),new google.maps.Point(0,0),new google.maps.Point(20,20)),i=new google.maps.Marker({position:new google.maps.LatLng(e,f),map:g,icon:h});if(c.hasClass("add-store-map")){var j='<div style="padding-top:5px; padding-bottom:5px; width:140px; height:auto; text-align:center">'+d+"</div>",k=new google.maps.InfoWindow({content:j});google.maps.event.addListenerOnce(i,"click",function(a){k.open(g,i)}),google.maps.event.addListener(k,"closeclick",function(){google.maps.event.addListenerOnce(i,"click",function(a){k.open(g,i)})})}else{var l=a('<div style="padding-top:5px; width:120px; height:auto; text-align: center;">'),m='<p style="padding: 0 15px 0 0; display: inline-block; *display: inline; *zoom: 1; text-align: left; line-height: 1.3; font-size: 13px; color: #666; background: url(/common/img/c/m_link_arrow.png) right center no-repeat;">'+c.attr("data-title")+"</p>";l.append(m);var k=new google.maps.InfoWindow({content:l[0]});google.maps.event.addListener(i,"mouseover",function(a){k.open(g,i)}),google.maps.event.addListener(i,"mouseout",function(a){k.close()}),google.maps.event.addListener(i,"click",function(a){location.href="/shop/"+c.attr("data-title")})}},a(function(){b()})}(jQuery);